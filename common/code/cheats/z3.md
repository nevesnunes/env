# examples

~/code/snippets/z3/multiple_solutions.py

zero extending vars
    https://www.voidsecurity.in/2015/09/csaw-ctf-re300-ftp.html
    https://stackoverflow.com/questions/43502670/howt-to-use-properly-zeroextn-a-in-a-z3py-formula

https://ericpony.github.io/z3py-tutorial/guide-examples.htm

https://z3prover.github.io/api/html/namespacez3py.html

### optimization

```python
o = Optimize()

range_count = Int('sum')
in_ranges = [ Int('in_range_' + str(i)) for i in lenr(nanobots) ]
for i in lenr(nanobots):
    (nx, ny, nz), nrng = nanobots[i]
    o.add(in_ranges[i] == If(zabs(x - nx) + zabs(y - ny) + zabs(z - nz) <= nrng, 1, 0))
o.add(range_count == sum(in_ranges))

h1 = o.maximize(range_count)
```

# debug 

```python
# Patch `z3printer.py`
# Increases number of conditions stringified
class Formatter:
    def __init__(self):
        global _ellipses
        self.max_depth           = 200
        self.max_args            = 1024
        # ...

# Add in our code
# __repr__(): Get all added conditions,
#     useful to see if some are missing due to overwritten variables
print(s.__repr__())

# Printer from `z3util.py:model_str()`
vs = [(v,m[v]) for v in m]
vs = sorted(vs,key=lambda a,_: str(a))
return '\n'.join(['{} = {}'.format(k,v) for (k,v) in vs])
```

# libraries

https://github.com/KosBeg/z3_staff
    [STEM CTF: Cyber Challenge 2018 / Tasks / Janitor's Keyring (Binary 400)](https://ctftime.org/writeup/9875)
